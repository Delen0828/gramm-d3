{"schema":"https://vega.github.io/schema/vega/v6.json","width":560,"height":420,"padding":{"left":60,"right":120,"top":20,"bottom":60},"autosize":"none","data":[{"name":"table","values":[{"x":"Q1","y":120,"color":"North"},{"x":"Q2","y":150,"color":"South"},{"x":"Q3","y":180,"color":"West"},{"x":"Q4","y":200,"color":"North"},{"x":"Q1","y":80,"color":"South"},{"x":"Q2","y":95,"color":"West"},{"x":"Q3","y":110,"color":"North"},{"x":"Q4","y":125,"color":"South"},{"x":"Q1","y":60,"color":"West"},{"x":"Q2","y":70,"color":"North"},{"x":"Q3","y":85,"color":"South"},{"x":"Q4","y":90,"color":"West"}]},{"name":"selected","on":[{"trigger":"clear","remove":true},{"trigger":"!shift","remove":true},{"trigger":"!shift && clicked","insert":"clicked"},{"trigger":"shift && clicked","toggle":"clicked"}]}],"scales":[{"name":"xscale","type":"band","domain":{"data":"table","field":"x","sort":true},"range":"width","padding":0.2},{"name":"yscale","type":"linear","domain":{"data":"table","field":"y"},"range":"height","round":true,"zero":true,"nice":true},{"name":"color","type":"ordinal","domain":{"data":"table","field":"color"},"range":["#fc4464","#08bc4d","#04b0fc","#ff9500","#9b59b6","#e74c3c","#2ecc71","#3498db"]}],"axes":[{"orient":"bottom","scale":"xscale","tickSize":0,"labelPadding":4,"zindex":1,"title":"x-axis"},{"orient":"left","scale":"yscale","title":"y-axis"}],"marks":[{"type":"group","from":{"facet":{"data":"table","name":"facet","groupby":"x"}},"encode":{"enter":{"x":{"scale":"xscale","field":"x"}}},"signals":[{"name":"width","update":"bandwidth('xscale')"}],"scales":[{"name":"pos","type":"band","range":"width","domain":{"data":"facet","field":"color"}}],"marks":[{"name":"bars","from":{"data":"facet"},"type":"rect","encode":{"enter":{"x":{"scale":"pos","field":"color"},"width":{"scale":"pos","band":1},"y":{"scale":"yscale","field":"y"},"y2":{"scale":"yscale","value":0},"fill":{"scale":"color","field":"color"}},"update":{"opacity":[{"test":"!length(data('selected')) || indata('selected', 'value', datum.color)","value":0.7},{"value":0.15}],"fill":[{"test":"!length(data('selected')) || indata('selected', 'value', datum.color)","scale":"color","field":"color"},{"value":"#ccc"}]}}}]}],"signals":[{"name":"clear","value":true,"on":[{"events":"pointerup[!event.item]","update":"true","force":true}]},{"name":"shift","value":false,"on":[{"events":"@legendSymbol:click, @legendLabel:click","update":"event.shiftKey","force":true}]},{"name":"clicked","value":[],"on":[{"events":"@legendSymbol:click, @legendLabel:click","update":"{value: datum.value}","force":true}]}],"legends":[{"fill":"color","title":"Color","orient":"right","padding":10,"encode":{"symbols":{"name":"legendSymbol","interactive":true,"update":{"fill":{"value":"transparent"},"strokeWidth":{"value":2},"opacity":[{"test":"!length(data('selected')) || indata('selected', 'value', datum.value)","value":0.7},{"value":0.15}],"size":{"value":64}}},"labels":{"name":"legendLabel","interactive":true,"update":{"opacity":[{"test":"!length(data('selected')) || indata('selected', 'value', datum.value)","value":1},{"value":0.25}]}}}}]}